{"version":3,"sources":["admin.coffee"],"names":[],"mappings":"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","file":"admin.js","sourcesContent":["app=angular.module 'UlibiAdmin',['ui.router','ngResource']\napp.config ($stateProvider,$urlRouterProvider)->\n  $urlRouterProvider.otherwise '/dest/view'\n  $stateProvider\n  .state 'home',\n    url:'/'\n  .state 'dest',\n    url:'/dest'\n    controller:'DestController'\n    templateUrl:'ngtmpl/destinations.view.html'\n  .state 'dest.viewMD',\n    url:'/view'\n    views:\n      master:\n        templateUrl:'ngtmpl/destinations.master.html'\n      detail:\n        templateUrl:'ngtmpl/destinations.detail.html'\n  .state 'articles',\n    url:'/articles'\n    controller:'ArticlesController'\n    templateUrl:'ngtmpl/articles.view.html'\n  .state 'articles.viewMD',\n    url:'/view'\n    views:\n      master:\n        templateUrl:'ngtmpl/articles.master.html'\n      detail:\n        templateUrl:'ngtmpl/articles.detail.html'\n  return\napp.directive 'script',->\n  restrict: 'E',\n  scope:false,\n  link:(scope,elem,attrs)->\n    if(attrs['lazyload']?)\n      s=document.createElement 'script'\n      s.type='text/javascript'\n      src=elem[0].src\n      console.log elem\n      if(src.length>0)\n        s.src=src\n      else\n        code=elem[0].text\n        s.text=code\n\n      document.body.appendChild s\n      elem[0].parentNode.removeChild elem[0]\n      return\napp.directive 'jqbind',($parse)->\n  restrict: 'A'\n  scope: true,\n  transclude: false,\n  compile: (element,attrs)->\n    modelAccessor=$parse attrs.ngModel\n    (scope,element,attrs,controller)->\n      valueChange=->\n        console.log 'yeah'\n        v=element[0].value\n        scope.$apply (scope)->\n          arr=v\n            .split ', '\n            .map (o)->JSON.parse o\n          modelAccessor.assign scope,arr\n          return\n        return\n      element.on 'change',valueChange\n      scope.$watch modelAccessor,(val)->\n        element.val(val)\n        return\n      return\n\napp.factory 'UlibiAdminApi',($resource)->\n  Dest: $resource 'admin/destination/:id'\n  DestPhoto: $resource 'admin/destination/:des_id/photo/:id',\n    des_id :'@des_id'\n\n@DestPhoto = (UlibiAdminApi)->\n  destAPI=UlibiAdminApi.Dest\n  destPhotoAPI=UlibiAdminApi.DestPhoto\n  @desId= -1\n  @relatedPhotos= []\n  @destinationsList= []\n  @newDest=\n    'des_name':'Đảo Hòn Tre'\n    'des_coors':\n      'longitude':''\n      'latitude':''\n    'des_instruction':''\n    'related_photos':[]\n  @newPhoto=\n    'photo_url':'http://www.freelargeimages.com/wp-content/uploads/2014/12/Landscape_01.jpg'\n\n  @uploadState=0\n  Object.defineProperty this,'uploadStateStr',\n    get: -> switch @uploadState\n      when 0 then 'Upload'\n      when 1 then 'Waiting...'\n      when 2 then 'Completed!'\n\n  @uploadComplete= ->\n  @selectDestinationComplete= ->\n  Object.defineProperty this,'destinationId',\n    get: -> @desId\n    set: (id)->\n      if id!=@desId\n        @desId=id\n        @relatedPhotos=destPhotoAPI.query\n          des_id: id\n        @selectDestinationComplete()\n        return\n  Object.defineProperty this,'currentDestination',\n    get: -> @destinationsList[@desId-1]\n\n  @uploadNewPhoto= =>\n    if @newPhoto.photo_url? and @newPhoto.photo_url.length>0\n      console.log 'upload begin'\n      @uploadState=1\n      destPhotoAPI.save {des_id:@desId},@newPhoto,(response)->\n        @uploadState=2\n        @relatedPhotos.push(response)\n        setTimeout ->\n          @uploadState=0\n          @newPhoto={}\n          @uploadComplete()\n          return\n        ,1000\n        return\n    return\n  @createNewDestination= =>\n    destAPI.save @newDest,(response)->\n      console.log response\n    return\n\n  @destinationsList=destAPI.query()\n  return\n\n@DestController = ($scope,UlibiAdminApi)->\n  $scope.dataSrc=new DestPhoto(UlibiAdminApi)\n  $scope.dataSrc.selectDestinationComplete= ->\n  $scope.dataSrc.uploadComplete= ->\n    $scope.$apply()\n  $scope.dataSrc.destinationId=1\n\n  $scope.select=(i)->\n    $scope.dataSrc.destinationId=i\n    return\n  $scope.itemEditMode=false\n  $scope.saveItem=->\n  $scope.toggleItemMode=->\n    if $scope.itemEditMode\n      $scope.saveItem()\n    $scope.itemEditMode=!$scope.itemEditMode\n    return\n  return\n\n@ArticlesController = ($scope,UlibiAdminApi)->\n  return\n\napp.controller 'DestController',@DestController\napp.controller 'ArticlesController',@ArticlesController"],"sourceRoot":"/source/"}