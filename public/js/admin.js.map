{"version":3,"sources":["admin.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;EAAA,GAAA,GAAI,OAAO,CAAC,MAAR,CAAe,YAAf,EAA4B,CAAC,WAAD,EAAa,YAAb,CAA5B;;EACJ,GAAG,CAAC,MAAJ,CAAW,SAAC,cAAD,EAAgB,kBAAhB;IACT,kBAAkB,CAAC,SAAnB,CAA6B,YAA7B;IACA,cACA,CAAC,KADD,CACO,MADP,EAEE;MAAA,GAAA,EAAI,GAAJ;KAFF,CAGA,CAAC,KAHD,CAGO,MAHP,EAIE;MAAA,GAAA,EAAI,OAAJ;MACA,UAAA,EAAW,gBADX;MAEA,WAAA,EAAY,+BAFZ;KAJF,CAOA,CAAC,KAPD,CAOO,aAPP,EAQE;MAAA,GAAA,EAAI,OAAJ;MACA,KAAA,EACE;QAAA,MAAA,EACE;UAAA,WAAA,EAAY,iCAAZ;SADF;QAEA,MAAA,EACE;UAAA,WAAA,EAAY,iCAAZ;SAHF;OAFF;KARF;EAFS,CAAX;;EAiBA,GAAG,CAAC,OAAJ,CAAY,eAAZ,EAA4B,SAAC,SAAD;WAC1B;MAAA,IAAA,EAAM,SAAA,CAAU,uBAAV,CAAN;MACA,SAAA,EAAW,SAAA,CAAU,qCAAV,EACT;QAAA,MAAA,EAAQ,SAAR;OADS,CADX;;EAD0B,CAA5B;;EAIA,IAAC,CAAA,SAAD,GAAa,SAAC,aAAD;AACX,QAAA;IAAA,IAAA,GAAK;IACL,GAAA,GAAI,aAAa,CAAC;IAClB,IAAC,CAAA,KAAD,GAAQ,CAAC;IACT,IAAC,CAAA,aAAD,GAAgB;IAChB,IAAC,CAAA,QAAD,GACE;MAAA,WAAA,EAAY,4EAAZ;;IAEF,IAAC,CAAA,WAAD,GAAa;IACb,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,gBAA3B,EACE;MAAA,GAAA,EAAK,SAAA;AAAG,gBAAO,IAAC,CAAA,WAAR;AAAA,eACD,CADC;mBACM;AADN,eAED,CAFC;mBAEM;AAFN,eAGD,CAHC;mBAGM;AAHN;MAAH,CAAL;KADF;IAMA,IAAC,CAAA,cAAD,GAAiB,SAAA;aACf,OAAO,CAAC,GAAR,CAAY,kBAAZ;IADe;IAEjB,MAAM,CAAC,cAAP,CAAsB,IAAtB,EAA2B,eAA3B,EACE;MAAA,GAAA,EAAK,SAAA;eAAG,IAAC,CAAA;MAAJ,CAAL;MACA,GAAA,EAAK,SAAC,EAAD;QACH,IAAG,EAAA,KAAI,IAAC,CAAA,KAAR;UACE,IAAC,CAAA,KAAD,GAAO;UACP,IAAC,CAAA,aAAD,GAAe,GAAG,CAAC,KAAJ,CACb;YAAA,MAAA,EAAQ,EAAR;WADa,EAFjB;;MADG,CADL;KADF;IAQA,IAAC,CAAA,cAAD,GAAiB,SAAA;MACf,IAAI,iCAAA,IAA4B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAxB,GAA+B,CAA/D;QACE,OAAO,CAAC,GAAR,CAAY,cAAZ;QACA,IAAI,CAAC,WAAL,GAAiB;QACjB,GAAG,CAAC,IAAJ,CAAS;UAAC,MAAA,EAAO,IAAI,CAAC,KAAb;SAAT,EAA6B,IAAC,CAAA,QAA9B,EAAuC,SAAC,QAAD;UACrC,IAAI,CAAC,WAAL,GAAiB;UACjB,OAAO,CAAC,GAAR,CAAY,QAAZ;UACA,IAAI,CAAC,aAAa,CAAC,IAAnB,CAAwB,QAAxB;UACA,UAAA,CAAW,SAAA;YACT,OAAO,CAAC,GAAR,CAAY,IAAZ;YACA,IAAI,CAAC,WAAL,GAAiB;YACjB,IAAI,CAAC,QAAL,GAAc;YACd,IAAI,CAAC,cAAL,CAAA;UAJS,CAAX,EAMC,IAND;QAJqC,CAAvC,EAHF;;IADe;EAzBN;;EA2Cb,IAAC,CAAA,cAAD,GAAkB,SAAC,MAAD,EAAQ,aAAR;IAChB,MAAM,CAAC,OAAP,GAAe,aAAa,CAAC,IAAI,CAAC,KAAnB,CAAA;IACf,MAAM,CAAC,QAAP,GACE;MAAA,KAAA,EAAM,CAAN;MACA,MAAA,EAAO,MAAM,CAAC,OADd;MAEA,SAAA,EAAc,IAAA,SAAA,CAAU,aAAV,CAFd;;IAGF,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,cAA1B,GAA0C,SAAA;aACxC,MAAM,CAAC,MAAP,CAAA;IADwC;IAE1C,MAAM,CAAC,MAAP,GAAc,SAAC,CAAD;MACZ,MAAM,CAAC,QAAQ,CAAC,KAAhB,GAAsB;MACtB,MAAM,CAAC,QAAQ,CAAC,MAAhB,GAAuB,MAAM,CAAC,OAAQ,CAAA,CAAA;MACtC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,aAA1B,GAAwC,CAAA,GAAE;IAH9B;IAKd,MAAM,CAAC,YAAP,GAAoB;IACpB,MAAM,CAAC,QAAP,GAAgB,SAAA,GAAA;IAChB,MAAM,CAAC,cAAP,GAAsB,SAAA;MACpB,IAAG,MAAM,CAAC,YAAV;QACE,MAAM,CAAC,QAAP,CAAA,EADF;;MAEA,MAAM,CAAC,YAAP,GAAoB,CAAC,MAAM,CAAC;IAHR;EAfN;;EAsBlB,GAAG,CAAC,UAAJ,CAAe,gBAAf,EAAgC,IAAC,CAAA,cAAjC;AAvFA","file":"admin.js","sourcesContent":["app=angular.module 'UlibiAdmin',['ui.router','ngResource']\napp.config ($stateProvider,$urlRouterProvider)->\n  $urlRouterProvider.otherwise '/dest/view'\n  $stateProvider\n  .state 'home',\n    url:'/'\n  .state 'dest',\n    url:'/dest'\n    controller:'DestController'\n    templateUrl:'ngtmpl/destinations.view.html'\n  .state 'dest.viewMD',\n    url:'/view'\n    views:\n      master:\n        templateUrl:'ngtmpl/destinations.master.html'\n      detail:\n        templateUrl:'ngtmpl/destinations.detail.html'\n  return\napp.factory 'UlibiAdminApi',($resource)->\n  Dest: $resource 'admin/destination/:id'\n  DestPhoto: $resource 'admin/destination/:des_id/photo/:id',\n    des_id :'@des_id'\n@DestPhoto = (UlibiAdminApi)->\n  that=@\n  API=UlibiAdminApi.DestPhoto\n  @desId= -1\n  @relatedPhotos= []\n  @newPhoto=\n    'photo_url':'http://www.freelargeimages.com/wp-content/uploads/2014/12/Landscape_01.jpg'\n\n  @uploadState=0\n  Object.defineProperty this,'uploadStateStr',\n    get: -> switch @uploadState\n      when 0 then 'Upload'\n      when 1 then 'Waiting...'\n      when 2 then 'Completed!'\n\n  @uploadComplete= ->\n    console.log 'upload completed'\n  Object.defineProperty this,'destinationId',\n    get: -> @desId\n    set: (id)->\n      if id!=@desId\n        @desId=id\n        @relatedPhotos=API.query\n          des_id: id\n        return\n  @uploadNewPhoto= ->\n    if (that.newPhoto.photo_url? && that.newPhoto.photo_url.length>0)\n      console.log 'upload begin'\n      that.uploadState=1\n      API.save {des_id:that.desId},@newPhoto,(response)->\n        that.uploadState=2\n        console.log response\n        that.relatedPhotos.push(response)\n        setTimeout ->\n          console.log that\n          that.uploadState=0\n          that.newPhoto={}\n          that.uploadComplete()\n          return\n        ,1000\n        return\n    return\n  return\n@DestController = ($scope,UlibiAdminApi)->\n  $scope.dataSrc=UlibiAdminApi.Dest.query()\n  $scope.selected=\n    index:0\n    object:$scope.dataSrc\n    relPhotos:new DestPhoto(UlibiAdminApi)\n  $scope.selected.relPhotos.uploadComplete= ->\n    $scope.$apply()\n  $scope.select=(i)->\n    $scope.selected.index=i\n    $scope.selected.object=$scope.dataSrc[i]\n    $scope.selected.relPhotos.destinationId=i+1\n    return\n  $scope.itemEditMode=false\n  $scope.saveItem=->\n  $scope.toggleItemMode=->\n    if $scope.itemEditMode\n      $scope.saveItem()\n    $scope.itemEditMode=!$scope.itemEditMode\n    return\n  return\n\napp.controller 'DestController',@DestController"],"sourceRoot":"/source/"}