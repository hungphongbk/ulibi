var app=angular.module("Ulibi",["satellizer","ui.router"]);app.factory("UlibiAuth",function(){return{currentUser:""}}),app.config(["$stateProvider","$urlRouterProvider","$authProvider","$provide",function(t,e,o,l){o.loginUrl="ulibi/api/auth/authenticate",t.state("home",{url:"/home",views:{auth:{templateUrl:"ng-templates/auth-view.html",controller:["$state","$auth",function(t,e){console.log("Current user: "+e.isAuthenticated()),e.isAuthenticated()?t.go("home.loggedin"):t.go("home.public")}]},topArticles:{templateUrl:"ng-templates/top-articles.html",controller:"topArticlesController"}}}).state("home.public",{url:"/public",templateUrl:"ng-templates/login-view.html",controller:"AuthController"}).state("home.loggedin",{url:"/loggedin",templateUrl:"ng-templates/user-view.html",controller:"UserController"}),e.otherwise("/home")}]),app.run(["$rootScope","$state","UlibiAuth",function(t,e,o){t.$on("$stateChangeStart",function(t,e,o,l,r){console.log(l.name+" -> "+e.name)})}]);var app=angular.module("Ulibi");app.controller("UserController",["$scope","$state","$auth","UlibiAuth",function(t,e,o,l){t.user=l.currentUser,t.logout=function(){o.logout().then(function(t){l.currentUser="",e.go("^",null,{reload:!0})})}}]);var app=angular.module("Ulibi");app.controller("AuthController",["$scope","$auth","$state","UlibiAuth",function(t,e,o,l){var r=t;r.login=function(){var t={username:r.username,password:r.password};console.log(t),e.login(t).then(function(t){console.log(t),l.currentUser=t.data.user[0],o.go("^",null,{reload:!0})})}}]);var app=angular.module("Ulibi");app.directive("bootstrapCol",function(){return{restrict:"A",link:function(t,e,o){var l=["xs","sm","md","lg"],r=o.bootstrapCol.split(" ").map(function(t,e){return"-"===t?null:"col-"+l[e]+"-"+t}).join(" ");e.addClass(r)}}});var app=angular.module("Ulibi");app.controller("topArticlesController",["$scope",function(t){}]);