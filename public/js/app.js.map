{"version":3,"sources":["app.module.js","controllers/auth/userController.js","controllers/auth/authController.js","services/api.js","filters/wordLimitTo.js","directives/bootstrapCol.js","controllers/ulibierController.js","controllers/topArticlesController.js","controllers/destinationsController.js"],"names":[],"mappings":"AAAA,IAAI,MAAM,QAAQ,OAAO,QAAQ;IAC7B;IACA;IACA;;AAEJ,IAAI,QAAQ,aAAa,UAAU;IAC/B,OAAO,CAAC,aAAa;;AAEzB,IAAI,6EAAO,SAAS,eAAe,mBAAmB,cAAc,SAAS;IACzE,cAAc,SAAS;;IAEvB,mBAAmB,KAAK,GAAG;IAC3B,mBAAmB,KAAK,QAAQ;;IAEhC;SACK,MAAM,YAAY;YACf,KAAK;YACL,OAAO;gBACH,IAAI;oBACA,aAAa;;gBAEjB,eAAe;oBACX,eAAe;oBACf,YAAY;;gBAEhB,mBAAmB;oBACf,eAAe;oBACf,YAAY;;;;SAIvB,MAAM,QAAQ;YACX,KAAK;YACL,UAAU;YACV,UAAU;;SAEb,MAAM,cAAc;YACjB,KAAK;YACL,OAAO;gBACH,IAAI;oBACA,aAAa;;;;SAIxB,MAAM,eAAe;YAClB,KAAK;YACL,OAAO;gBACH,IAAI;oBACA,aAAa;;;;SAIxB,MAAM,SAAS;YACZ,KAAK;YACL,aAAa;YACb,YAAY;;SAEf,MAAM,OAAO;YACV,KAAK;YACL,aAAa;;;IAGrB,mBAAmB,UAAU;IAC9B;AC/DH,IAAI,MAAM,QAAQ,OAAO;AACzB,IAAI,WAAW,4DAAiB,SAAS,QAAQ,QAAQ,OAAO,UAAU;IACtE,OAAO,OAAO,UAAU;IACxB,OAAO,SAAS,UAAU;QACtB,MAAM,SAAS,KAAK,SAAS,KAAK;YAC9B,UAAU,cAAc;YACxB,OAAO,GAAG,KAAK,MAAM,EAAE,UAAU;;;IAG1C;ACTH,IAAI,MAAM,QAAQ,OAAO;AACzB,IAAI,WAAW,4DAAiB,SAAS,OAAO,MAAM,QAAQ,UAAU;IACpE,IAAI,KAAK;IACT,GAAG,QAAQ,YAAY;QACnB,IAAI,cAAc;YACd,UAAU,GAAG;YACb,UAAU,GAAG;;QAEjB,QAAQ,IAAI;;QAEZ,MAAM,MAAM,aAAa,KAAK,UAAU,MAAM;;YAE1C,QAAQ,IAAI;YACZ,UAAU,cAAc,KAAK,KAAK,QAAQ;YAC1C,OAAO,GAAG,QAAQ,MAAM,EAAE,UAAU;;;IAG7C;ACjBH,IAAI,IAAI,QAAQ,OAAO;AACvB,IAAI,QAAQ,kCAAW,SAAS,MAAM,UAAU;IAC5C,SAAS,WAAW,IAAI;QACpB,IAAI,OAAO,IAAI;aACV,MAAM,KAAK;aACX,QAAQ,OAAO,SAAS,OAAO;QACpC,GAAG,KAAK,SAAS;YACb,KAAK,KAAK,MAAM,EAAE,CAAC;QACvB,GAAG,KAAK,SAAS;YACb,KAAK,KAAK,QAAQ,aAAa;QACnC,OAAO;;IAEX,QAAQ,IAAI,WAAW;IACvB,IAAI,UAAU,WAAW,WAAW;IACpC,IAAI,EAAE;IACN,IAAI,KAAK;QACL,SAAS;YACL,SAAS;;QAEb,cAAc;YACV,SAAS;;QAEb,SAAS;YACL,SAAS;;;IAGjB,QAAQ,QAAQ,KAAK,SAAS,QAAQ,EAAE;QACpC,QAAQ,OAAO,SAAS,MAAM;YAC1B,QAAQ,CAAC,UAAU,WAAW,GAAG,IAAI;YACrC,OAAO,EAAE,IAAI,QAAQ,KAAK,QAAQ,OAAO;;;;IAIjD,IAAI,QAAQ,SAAS,SAAS,IAAI;QAC9B,IAAI,KAAK;QACT,OAAO,EAAE,IAAI,QAAQ,KAAK,QAAQ,iBAAiB;;;IAGvD,OAAO;IACR;ACvCH,IAAI,MAAM,QAAQ,OAAO;AACzB,SAAS,aAAa,OAAO,OAAO,OAAO,WAAW;IAClD,QAAQ,CAAC,CAAC,SAAS,MAAM,UAAU,IAAI,MAAM;IAC7C,QAAQ,CAAC,QAAQ,KAAK,SAAS,CAAC,MAAM,UAAU,MAAM,SAAS,QAAQ;IACvE,OAAO;;IAEP,aAAa,CAAC,OAAO,aAAa,aAAa,WAAW;;IAE1D,IAAI,MAAM;CACb,IAAI,QAAQ,MAAM,OAAO,QAAQ,MAAM,KAAK,MAAM;;CAElD,IAAI,OAAO,CAAC,MAAM,MAAM,MAAM,QAAQ,MAAM,OAAO,MAAM;CACzD,WAAW,CAAC,MAAM,MAAM,MAAM,QAAQ,WAAW;CACjD,IAAI,KAAK,MAAM,MAAM,EAAE,QAAQ,KAAK,KAAK;;;CAGzC,OAAO;;AAER,IAAI,OAAO,YAAY,UAAU;CAChC,OAAO;GACL;ACpBH,IAAI,IAAI,QAAQ,OAAO;AACvB,IAAI,UAAU,eAAe,UAAU;IACnC,OAAO;QACH,UAAU;QACV,KAAK,SAAS,EAAE,EAAE,EAAE;YAChB,IAAI,MAAM,CAAC,KAAK,KAAK,KAAK;YAC1B,IAAI,MAAM,EAAE,aAAa,MAAM;iBAC1B,IAAI,SAAS,EAAE,EAAE;oBACd,GAAG,IAAI,KAAK,OAAO;oBACnB,OAAO,OAAO,MAAM,GAAG,IAAI;;iBAE9B,KAAK;YACV,EAAE,SAAS;;;GAGpB;ACfH,IAAI,IAAI,QAAQ,OAAO;AACvB,IAAI,WAAW,4CAAqB,SAAS,OAAO,SAAS;CAC5D,OAAO,UAAU;CACjB,IAAI,IAAI,SAAS;CACjB,IAAI,EAAE;CACN,EAAE,eAAe;CACjB,EAAE,WAAW;CACb,EAAE,YAAY,UAAU;EACvB,IAAI,SAAS,EAAE;IACb,QAAQ,SAAS,KAAK;IACtB,EAAE,WAAW;;;;IAId;ACdH,IAAI,MAAM,QAAQ,OAAO;AACzB,IAAI,WAAW,6CAAsB,SAAS,OAAO,SAAS;IAC1D,IAAI,IAAI;IACR,IAAI,EAAE;IACN,EAAE,WAAW;;IAEb,EAAE,SAAS,UAAU;QACjB,IAAI,QAAQ;aACP,QAAQ,SAAS,KAAK;gBACnB,EAAE,WAAW,KAAK,MAAM,EAAE;;;IAGvC;ACZH,IAAI,MAAM,QAAQ,OAAO;AACzB,IAAI,WAAW,iDAA0B,SAAS,OAAO,SAAS;IAC9D,IAAI,IAAI;IACR,IAAI,EAAE;IACN,EAAE,WAAW;;IAEb,EAAE,SAAS,UAAU;QACjB,IAAI,aAAa,OAAO;aACnB,QAAQ,SAAS,KAAK;;gBAEnB,EAAE,WAAW;;;IAG1B","file":"app.js","sourcesContent":["var app = angular.module('Ulibi',[\n    'satellizer',\n    'ui.router',\n    'ngAnimate'\n]);\napp.factory('UlibiAuth', function(){\n    return {currentUser: ''};\n});\napp.config(function($stateProvider,$urlRouterProvider,$authProvider,$provide){\n    $authProvider.loginUrl='ulibi/api/auth/authenticate';\n\n    $urlRouterProvider.when('','/');\n    $urlRouterProvider.when('/blog','/blog/index');\n\n    $stateProvider\n        .state('homepage', {\n            url: '/',\n            views: {\n                '': {\n                    templateUrl: 'ng-templates/index-view.html'\n                },\n                'topDes@home': {\n                    'templateUrl': 'ng-templates/index-view/top-destinations.html',\n                    controller: 'DestinationsController'\n                },\n                'topUlibier@home': {\n                    'templateUrl': 'ng-templates/index-view/top-ulibier.html',\n                    controller: 'UlibierController'\n                }\n            }\n        })\n        .state('blog', {\n            url: '/blog',\n            abstract: true,\n            template: '<ui-view />'\n        })\n        .state('blog.index', {\n            url: '/index',\n            views: {\n                '': {\n                    templateUrl: 'ng-templates/blog-view.html'\n                }\n            }\n        })\n        .state('blog.detail', {\n            url: '/detail/:articleId',\n            views: {\n                '': {\n                    templateUrl: 'ng-templates/blog-view/blog-detail.html'\n                }\n            }\n        })\n        .state('login', {\n            url: '/login',\n            templateUrl: 'ng-templates/login-view.html',\n            controller: 'AuthController'\n        })\n        .state('404', {\n            url: '/404',\n            templateUrl: 'ng-templates/404.html'\n        });\n\n    $urlRouterProvider.otherwise('/404');\n});","var app = angular.module('Ulibi');\napp.controller('UserController',function($scope, $state, $auth, UlibiAuth){\n    $scope.user = UlibiAuth.currentUser;\n    $scope.logout = function(){\n        $auth.logout().then(function(data){\n            UlibiAuth.currentUser = '';\n            $state.go('^', null, { 'reload': true });\n        });\n    };\n});","var app = angular.module('Ulibi');\napp.controller('AuthController',function($scope,$auth,$state, UlibiAuth){\n    var vm = $scope;\n    vm.login = function () {\n        var credentials = {\n            username: vm.username,\n            password: vm.password\n        };\n        console.log(credentials);\n        // Use Satellizer's $auth service to login\n        $auth.login(credentials).then(function (data) {\n            // If login is successful, redirect to the users state\n            console.log(data);\n            UlibiAuth.currentUser = data.data['user'][0];\n            $state.go('home', null, { 'reload': true });\n        });\n    };\n});","var app=angular.module('Ulibi');\napp.factory('UlibiApi',function($http,$location){\n    function getUrlBase(loc){\n        var root = loc.$$absUrl\n            .split('#')[0]\n            .replace(window.location.origin,'');\n        if(root.endsWith('/'))\n            root=root.slice(0,-1);\n        if(root.endsWith('index.html'))\n            root=root.replace('index.html','');\n        return root;\n    }\n    console.log(getUrlBase($location));\n    var urlBase = getUrlBase($location)+'/api/';\n    var h=$http;\n    var api= {\n        article: {\n            postfix: 'article'\n        },\n        destinations: {\n            postfix: 'dest'\n        },\n        ulibier: {\n            postfix: 'ulibier'\n        }\n    };\n    angular.forEach(api, function(section,_){\n        section.getAll=function(param){\n            param = (param === undefined)?'':'?'+param;\n            return h.get(urlBase+this.postfix+'/all'+param);\n        }\n    });\n\n    api.ulibier.trending=function(top){\n        top=top||3;\n        return h.get(urlBase+this.postfix+'/trending?top='+top);\n    };\n\n    return api;\n});","var app = angular.module('Ulibi');\nfunction wordsLimitTo(input, limit, begin, exceedSign){\n    begin = (!begin || isNaN(begin)) ? 0 : toInt(begin);\n    begin = (begin < 0 && begin >= -input.length) ? input.length + begin : begin;\n    limit+=begin;\n\n    exceedSign = (typeof exceedSign!=='undefined')?exceedSign:'';\n\n    var regex=/\\s+/gi;\n\tvar words = input.trim().replace(regex,' ').split(' ');\n\t//console.log(words.length,' ',begin+limit);\n\tvar length=(begin+limit>words.length)?words.length:begin+limit;\n\texceedSign=(begin+limit<words.length)?exceedSign:'';\n\tvar rs = words.slice(0,length).join(' ')+exceedSign;\n\t//console.log(length);\n\t//console.log(words.slice(0,length).join('-'));\n\treturn rs;\n}\napp.filter('wordLimit',function(){\n\treturn wordsLimitTo;\n});","var app=angular.module('Ulibi');\napp.directive('bootstrapCol',function(){\n    return {\n        restrict: 'A',\n        link:function(s,e,a){\n            var units=['xs','sm','md','lg'];\n            var vals= a.bootstrapCol.split(' ')\n                .map(function(e,i){\n                    if(e==='-') return null;\n                    return 'col-'+units[i]+'-'+e;\n                })\n                .join(' ');\n            e.addClass(vals);\n        }\n    }\n});","var app=angular.module('Ulibi');\napp.controller('UlibierController', function($scope,UlibiApi){\n\t$scope.dummyText='fuck you';\n\tvar api=UlibiApi.ulibier;\n\tvar s=$scope;\n\ts.numOfTrendings=3;\n\ts.dataSource=[];\n\ts.getTrending=function(){\n\t\tapi.trending(s.numOfTrendings)\n\t\t\t.success(function(data){\n\t\t\t\ts.dataSource=data;\n\t\t\t});\n\n\t};\n});","var app = angular.module('Ulibi');\napp.controller('ArticlesController', function($scope,UlibiApi){\n    var api=UlibiApi;\n    var s=$scope;\n    s.dataSource=[];\n\n    s.getTop = function(){\n        api.article.getAll()\n            .success(function(data){\n                s.dataSource=data.slice(0,3);\n            });\n    };\n});","var app = angular.module('Ulibi');\napp.controller('DestinationsController', function($scope,UlibiApi){\n    var api=UlibiApi;\n    var s=$scope;\n    s.dataSource=[];\n\n    s.getTop = function(){\n        api.destinations.getAll('withAvatar=1&top=6')\n            .success(function(data){\n                //console.log(data);\n                s.dataSource=data;\n            });\n    };\n});"],"sourceRoot":"/source/"}