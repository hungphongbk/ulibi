{"version":3,"sources":["jquery.coffee","jquery.app.js"],"names":["$","DestinationItem","TagItem","parseQueryString","uploadImage","prototype","stringToItem","str","tag_id","tag_name","itemToString","item","compareItems","item1","item2","des_name","options","settings","token","uploadExisting","data","uploadUrl","getToken","val","callback","extend","ajax","type","done","queryString","i","kv","len","q","queries","rs","split","length","Ulibi","fn","addClassIfExist","cls","this","each","hasClass","addClass","removeClassIfExist","removeClass","UlibiTagEditor","log","debug","wrapClass","tags","itemManager","msg","console","width","parent","innerWidth","textext","plugins","html","wrap","tag","ext","bind","_this","e","query","target","trigger","result","filter","UlibiPhotoDragDrop","isDraggingClass","isDropped","window","FileReader","alert","ondragover","ondragend","ondragenter","stopPropagation","preventDefault","ondragleave","ondrop","file","reader","dataTransfer","files","onload","event","status","css","readAsDataURL","DeleteBlogArticle","csrf_token","title","text","click","action","attr","swal","replace","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","closeOnCancel","showLoaderOnConfirm","url","_token","success","error","UlibiImageSelector","uploaderId","parentId","childrenSelector","method","dataTemplate","location","reload","uploadCallback","btnDisabledClass","changePhoto","closeSelector","dataSelectedAttr","openSelector","popup","submit","update","uploader","find","JSON","parse","atob","id","test","response","message","selected","cb","selectable","ui","on","off","magnificPopup","preloader","mainClass","callbacks","beforeOpen","close","UlibiProfileInformationEditor","dialogSelector","formSelector","open","tab","UlibiShowImage","author","content","closeBtnInside","image","verticalFit","markup","titleSrc","el","imageLoadComplete","img","naturalWidth","jQuery","call"],"mappings":"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","file":"jquery.app.js","sourcesContent":["(($) ->\n  class TagItem\n    stringToItem: (str)->\n      tag_id: 0\n      tag_name: str\n    itemToString: (item)->item['tag_name']\n    compareItems: (item1, item2)->item1['tag_id'] == item2['tag_id']\n  class DestinationItem\n    stringToItem: (str)->\n      des_name: str\n    itemToString: (item)->item['des_name']\n    compareItems: (item1, item2)->item1['des_name'] == item2['des_name']\n  uploadImage=(options)->\n    settings=\n      uploadExisting:0\n      data:''\n      uploadUrl: '/photo'\n      getToken:()->\n        $('input[name=\"_token\"]').val()\n      callback:()->\n    settings=$.extend settings, options\n    token=settings.getToken()\n    $.ajax settings.uploadUrl,\n      type: 'POST'\n      data: (if settings.uploadExisting then 'id=' else 'internal_url=')+settings.data+'&_token='+token\n    .done (data)->\n      settings.callback? data\n      return\n  parseQueryString=(queryString)->\n    queries=queryString.split \"&\"\n    rs={}\n    for q in queries\n      kv=q.split \"=\"\n      rs[kv[0]]=kv[1]\n    rs\n\n  $.Ulibi=\n    TagItem: TagItem\n    DestinationItem: DestinationItem\n    uploadImage: uploadImage\n    parseQueryString: parseQueryString\n  $.fn.extend\n    addClassIfExist: (cls)->\n      @each ()->\n        if not $(@).hasClass cls then $(@).addClass cls else $(@)\n        @\n    removeClassIfExist: (cls)->\n      @each ()->\n        if $(@).hasClass cls then $(@).removeClass cls else $(@)\n        @\n\n    UlibiTagEditor: (options)->\n      settings=\n        debug: false\n        wrapClass: ''\n        tags: []\n        itemManager: {}\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        $(@).width ($(@).parent().innerWidth()-24)\n        $(@).textext\n          'plugins': 'tags autocomplete'\n          'html':\n            wrap: \"<div class=\\\"text-core \"+settings.wrapClass+\"\\\"><div class=\\\"text-wrap\\\"></div></div>\"\n            tag: \"<div class=\\\"text-tag\\\"><div class=\\\"text-button\\\"><span class=\\\"text-label\\\"/><a class=\\\"custom-edit\\\"/><a class=\\\"text-remove\\\"><i class=\\\"fa fa-times\\\"></i></a></div></div>\"\n          ext:\n            itemManager: settings.itemManager\n        .bind 'getSuggestions',(e,data)=>\n          textext = $(e.target).textext()[0]\n          query = (if data then data.query else '') || ''\n          $(@).trigger 'setSuggestions',\n            result : textext.itemManager().filter settings.tags, query\n        log 'UlibiTagEditor worked!'\n    UlibiPhotoDragDrop: (options)->\n      settings=\n        debug: false\n        html:\n          isDraggingClass: 'is-dragging'\n          isDropped: 'is-dropped'\n        getToken:()->\n          $('input[name=\"_token\"]').val()\n        callback: ()->\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        alert 'Trình duyệt của bạn không hỗ trợ kéo & thả File :)' if typeof window.FileReader=='undefined'\n        @ondragover= -> false\n        @ondragend= -> false\n        @ondragenter= (e)->\n          # $(@).addClass settings.html.isDraggingClass if not $(@).hasClass settings.html.isDraggingClass\n          e.stopPropagation()\n          e.preventDefault()\n          $(@).addClassIfExist settings.html.isDraggingClass\n          false\n        @ondragleave= ->\n          # $(@).removeClass settings.html.isDraggingClass if $(@).hasClass settings.html.isDraggingClass\n          $(@).removeClassIfExist settings.html.isDraggingClass\n          false\n        @ondrop= (e)=>\n          e.stopPropagation()\n          e.preventDefault()\n          $(@).addClass settings.html.isDropped if not $(@).hasClass settings.html.isDropped\n          reader=new FileReader()\n          file=e.dataTransfer.files[0]\n          reader.onload=(event)=>\n            log '[UlibiPhotoDragDrop] file content length: '+event.target.result.length\n            $.Ulibi.uploadImage\n              uploadExisting:false\n              data:event.target.result\n              getToken: settings.getToken\n              callback: (data)=>\n                if data.status=='succeeded'\n                  $(@).addClass 'has-image' if not $(@).hasClass 'has-image'\n                  $(@).css 'background-image','url('+event.target.result+')'\n                  settings.callback data\n                return\n            return\n          reader.readAsDataURL file\n          false\n        log 'UlibiPhotoDragDrop worked!'\n        return\n    DeleteBlogArticle: (options)->\n      settings=\n        debug: false\n        csrf_token: ''\n        alert:\n          title:'Are you sure?'\n          text: \"Bạn có chắc chắn muốn xoá bài viết <strong>{title}</strong> không?\"\n        callback: ()->\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        $(@).click (e)->\n          action= $(e.target).attr 'data-href'\n          title=$(e.target).attr 'data-title'\n          swal\n            title: settings.alert.title\n            text: settings.alert.text.replace '{title}',title\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonColor: '#DD6B55',\n            confirmButtonText: 'Có, xoá nó đi :)',\n            cancelButtonText: 'Không :(',\n            closeOnConfirm: false,\n            closeOnCancel: true,\n            showLoaderOnConfirm: true,\n            html: true\n          , ()->\n              $.ajax\n                url: action\n                type: 'DELETE'\n                data:\n                  '_token': settings.csrf_token\n                success: ()->\n                  swal\n                    title: 'Success',\n                    text: '',\n                    type: 'success'\n                  ,settings.callback\n                error: ()->\n                  swal\n                    title: 'Failed',\n                    text: '',\n                    type: 'error'\n                  ,settings.callback\n              return\n          return\n        log 'DeleteBlogArticle plugin worked!'\n        return\n    UlibiImageSelector: (options)->\n      settings=\n        debug: false\n        html:\n          uploaderId:''\n          parentId:''\n          childrenSelector:''\n        ajax:\n          url:''\n          method:'POST'\n          dataTemplate:'key={0}'\n        callback: ()->\n          location.reload true\n        uploadCallback: null\n\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        btnDisabledClass=\"btn-disabled\"\n        popup=$(@).attr 'href'\n        submit=$(popup).find \"[data-role='change']\"\n        uploader=$(settings.html.uploaderId)\n        dataSelectedAttr=\"data-selected\"\n        ajax=JSON.parse(atob(settings.ajax))\n\n        changePhoto=(id)=>\n          data=ajax.dataTemplate.replace '{0}',id\n          log id\n          # log data\n          test=false\n          if !test\n            $.ajax\n              url:ajax.url\n              type:ajax.method\n              data:data\n              success:(response)->\n                if response.status==\"OK\"\n                  log \"Change photo success, id=\"+id\n                  settings.callback()\n                else\n                  log \"Error expected, message: \"+response.message\n                return\n          return\n\n        update = (e)=>\n          e.preventDefault()\n          if $(submit).hasClass btnDisabledClass\n            return\n          selected=$(submit).attr dataSelectedAttr\n          changePhoto selected\n          false\n\n        openSelector = ()=>\n          $(submit).addClassIfExist btnDisabledClass\n          $(popup).find(settings.html.parentId).selectable\n            filter: settings.html.childrenSelector\n            selected: (e,ui)->\n              $(submit).removeClassIfExist btnDisabledClass\n              .attr dataSelectedAttr,$(ui.selected).attr \"data-photoid\"\n              .on \"click\",update\n\n              return\n\n          cb=settings.uploadCallback\n          if(!cb)\n            cb=(data)->\n              changePhoto data.id\n              return\n\n          $(uploader).UlibiPhotoDragDrop\n            debug: true\n            getToken: ->\n              ($.Ulibi.parseQueryString ajax.dataTemplate)._token\n            callback: cb\n          return\n        closeSelector = ()=>\n          $(popup).find(settings.html.parentId).selectable \"destroy\"\n          $(submit).off()\n        $(@).magnificPopup\n          type:'inline'\n          preloader:false\n          mainClass:'mfp-dialog'\n          callbacks:\n            beforeOpen: ()->\n              openSelector()\n              return\n            close: ()->\n              closeSelector()\n              return\n\n\n        log 'UlibiImageSelector plugin worked!'\n        return\n    UlibiProfileInformationEditor: (options)->\n      settings=\n        debug: false\n        html:\n          dialogSelector:''\n          formSelector:''\n        ajax:\n          url:''\n          method:'POST'\n          dataTemplate:'key={0}'\n        callback: ()->\n          location.reload true\n\n      settings=$.extend settings, options\n\n\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ->\n        $(@).magnificPopup\n          type:'inline'\n          preloader:false\n          mainClass:'mfp-dialog'\n          callbacks:\n            open: ()=>\n              tab=$(@).attr 'data-tab'\n              $(settings.html.dialogSelector+' a[href=\"#tab-'+tab+'\"]')\n              .tab 'show'\n              return\n            close: ()=>\n              $(settings.html.dialogSelector+' a[href=\"#tab-0\"]')\n              .tab 'show'\n              return\n        log \"UlibiProfileInformationEditor worked!\"\n        return\n    UlibiShowImage: (options) ->\n      settings=\n        debug: false\n        html:\n          dialogSelector:''\n          formSelector:''\n\n      settings=$.extend settings, options\n\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n\n      @each ->\n        data=JSON.parse atob $(@).attr 'data-encoded'\n        author=JSON.parse atob $(@).attr 'data-author-encoded'\n        content=JSON.parse atob $(@).attr 'data-content-encoded'\n\n        $(@).magnificPopup\n          type: 'image'\n          closeBtnInside: false\n          image:\n            verticalFit: false\n            markup: \"\"\"\n<div class=\"mfp-figure image-show\">\n  <div class='row'>\n    <div class='col-sm-8'>\n      <div class=\"mfp-img\"></div>\n    </div>\n    <div class=\"col-sm-4 img-content\">\n      <div class='divide20'></div>\n      <h5 class=\"img-show-author\"><a href=\"/profile/#{author['username']}\">#{author['full_name']}</a></h5>\n      <p class=\"img-show-title\">#{data['photo_description']}</p>\n      <p class='img-show-counter'><a href='/#'><i class=\"fa #{ if content['liked'] then 'fa-heart' else 'fa-heart-o' }\"></i></a>#{content['like_count']}</p>\n    </div>\n  </div>\n</div>\n\"\"\"\n            titleSrc: (item)->\n              id=item.el.attr('title')\n          callbacks:\n            imageLoadComplete: (e)->\n              img=$(@.content).find('img.mfp-img')[0]\n              $(@.content).parent().width img.naturalWidth*3/2\n              log img\n        log 'UlibiShowImage worked!'\n        return\n) jQuery",null],"sourceRoot":"/source/"}