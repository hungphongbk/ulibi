{"version":3,"sources":["jquery.coffee","jquery.app.js"],"names":["$","DestinationItem","TagItem","uploadImage","prototype","stringToItem","str","tag_id","tag_name","itemToString","item","compareItems","item1","item2","des_name","options","settings","token","uploadExisting","data","uploadUrl","getToken","val","callback","extend","ajax","type","done","Ulibi","fn","UlibiTagEditor","log","debug","wrapClass","tags","itemManager","msg","console","this","each","width","parent","innerWidth","textext","plugins","html","wrap","tag","ext","bind","_this","e","query","target","trigger","result","filter","UlibiPhotoDragDrop","isDraggingClass","isDropped","window","FileReader","alert","ondragover","ondragend","ondragenter","hasClass","addClass","ondragleave","removeClass","ondrop","file","reader","preventDefault","dataTransfer","files","onload","event","length","status","css","readAsDataURL","jQuery","call"],"mappings":"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","file":"jquery.app.js","sourcesContent":["(($) ->\n  class TagItem\n    stringToItem: (str)->\n      tag_id: 0\n      tag_name: str\n    itemToString: (item)->item['tag_name']\n    compareItems: (item1, item2)->item1['tag_id'] == item2['tag_id']\n  class DestinationItem\n    stringToItem: (str)->\n      des_name: str\n    itemToString: (item)->item['des_name']\n    compareItems: (item1, item2)->item1['des_name'] == item2['des_name']\n  uploadImage=(options)->\n    settings=\n      uploadExisting:0\n      data:''\n      uploadUrl: '/photo'\n      getToken:()->\n        $('input[name=\"_token\"]').val()\n      callback:()->\n    settings=$.extend settings, options\n    token=settings.getToken()\n    $.ajax settings.uploadUrl,\n      type: 'POST'\n      data: (if settings.uploadExisting then 'id=' else 'internal_url=')+settings.data+'&_token='+token\n    .done (data)->\n      settings.callback? data\n      return\n\n  $.Ulibi=\n    TagItem: TagItem\n    DestinationItem: DestinationItem\n    uploadImage: uploadImage\n  $.fn.extend\n    UlibiTagEditor: (options)->\n      settings=\n        debug: false\n        wrapClass: ''\n        tags: []\n        itemManager: {}\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        $(@).width ($(@).parent().innerWidth()-24)\n        $(@).textext\n          'plugins': 'tags autocomplete'\n          'html':\n            wrap: \"<div class=\\\"text-core \"+settings.wrapClass+\"\\\"><div class=\\\"text-wrap\\\"></div></div>\"\n            tag: \"<div class=\\\"text-tag\\\"><div class=\\\"text-button\\\"><span class=\\\"text-label\\\"/><a class=\\\"custom-edit\\\"/><a class=\\\"text-remove\\\"><i class=\\\"fa fa-times\\\"></i></a></div></div>\"\n          ext:\n            itemManager: settings.itemManager\n        .bind 'getSuggestions',(e,data)=>\n          textext = $(e.target).textext()[0]\n          query = (if data then data.query else '') || ''\n          $(@).trigger 'setSuggestions',\n            result : textext.itemManager().filter settings.tags, query\n        log 'UlibiTagEditor worked!'\n    UlibiPhotoDragDrop: (options)->\n      settings=\n        debug: false\n        html:\n          isDraggingClass: 'is-dragging'\n          isDropped: 'is-dropped'\n        callback: ()->\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        alert 'Trình duyệt của bạn không hỗ trợ kéo & thả File :)' if typeof window.FileReader=='undefined'\n        @ondragover= -> false\n        @ondragend= -> false\n        @ondragenter= ->\n          $(@).addClass settings.html.isDraggingClass if not $(@).hasClass settings.html.isDraggingClass\n          false\n        @ondragleave= ->\n          $(@).removeClass settings.html.isDraggingClass if $(@).hasClass settings.html.isDraggingClass\n          false\n        @ondrop= (e)=>\n          e.preventDefault()\n          $(@).addClass settings.html.isDropped if not $(@).hasClass settings.html.isDropped\n          reader=new FileReader()\n          file=e.dataTransfer.files[0]\n          reader.onload=(event)=>\n            log '[UlibiPhotoDragDrop] file content length: '+event.target.result.length\n            $.Ulibi.uploadImage\n              uploadExisting:false\n              data:event.target.result\n              callback: (data)=>\n                if data.status=='succeeded'\n                  $(@).addClass 'has-image' if not $(@).hasClass 'has-image'\n                  $(@).css 'background-image','url('+event.target.result+')'\n                  settings.callback data\n                return\n            return\n          reader.readAsDataURL file\n          false\n        log 'UlibiPhotoDragDrop worked!'\n        return\n\n) jQuery",null],"sourceRoot":"/source/"}