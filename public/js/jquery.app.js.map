{"version":3,"sources":["jquery.coffee","jquery.app.js"],"names":["$","window","DestinationItem","TagItem","commentWrapper","message_leavecommenthere","message_nocomment","parseQueryString","uploadImage","prototype","stringToItem","str","tag_id","tag_name","itemToString","item","compareItems","item1","item2","des_name","options","settings","uploadExisting","data","uploadUrl","getToken","val","callback","onProgress","percent","console","log","extend","ajax","type","done","queryString","i","kv","len","q","queries","rs","split","length","selector","getUrl","comments","noCommentsText","profilePictureURL","textareaPlaceholderText","fieldMappings","id","created","content","fullname","parent","getComments","success","error","url","commentArray","postComment","commentJson","comment","Ulibi","fn","addClassIfExist","cls","this","each","hasClass","addClass","removeClassIfExist","removeClass","UlibiTagEditor","debug","wrapClass","tags","itemManager","msg","width","innerWidth","textext","plugins","html","wrap","tag","ext","bind","_this","e","query","target","trigger","result","filter","UlibiPhotoDragDrop","isDraggingClass","isDropped","FileReader","alert","ondragover","ondragend","ondragenter","stopPropagation","preventDefault","ondragleave","ondrop","file","reader","dataTransfer","files","onload","event","status","css","readAsDataURL","DeleteBlogArticle","csrf_token","title","text","click","action","attr","swal","replace","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","closeOnCancel","showLoaderOnConfirm","_token","UlibiImageSelector","uploaderId","parentId","childrenSelector","method","dataTemplate","location","reload","uploadCallback","btnDisabledClass","changePhoto","closeSelector","dataSelectedAttr","openSelector","popup","submit","update","uploader","find","JSON","parse","atob","test","response","message","selected","cb","selectable","ui","on","off","magnificPopup","preloader","mainClass","callbacks","beforeOpen","close","UlibiProfileInformationEditor","dialogSelector","formSelector","open","tab","UlibiShowImage","author","doDelete","doLike","isowner","next","r","confirm","closeBtnInside","image","verticalFit","markup","titleSrc","el","imageLoadComplete","deleteBtn","img","naturalWidth","unbind","UlibiArticleComment","jQuery","call"],"mappings":"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","file":"jquery.app.js","sourcesContent":["(($, window) ->\n  message_nocomment='Chưa có comment nào'\n  message_leavecommenthere='Để lại comment ở đây'\n\n\n  class TagItem\n    stringToItem: (str)->\n      tag_id: 0\n      tag_name: str\n    itemToString: (item)->item['tag_name']\n    compareItems: (item1, item2)->item1['tag_id'] == item2['tag_id']\n  class DestinationItem\n    stringToItem: (str)->\n      des_name: str\n    itemToString: (item)->item['des_name']\n    compareItems: (item1, item2)->item1['des_name'] == item2['des_name']\n  uploadImage=(options)->\n    settings=\n      uploadExisting:0\n      data:''\n      uploadUrl: '/photo'\n      getToken:()->\n        $('input[name=\"_token\"]').val()\n      callback:()->\n      onProgress:(percent)->\n        console.log percent+\"% complete\"\n    settings=$.extend settings, options\n    $.ajax settings.uploadUrl,\n      type: 'POST'\n      data: (if settings.uploadExisting then 'id=' else 'internal_url=')+settings.data\n    .done (data)->\n      settings.callback? data\n      return\n  parseQueryString=(queryString)->\n    queries=queryString.split \"&\"\n    rs={}\n    for q in queries\n      kv=q.split \"=\"\n      rs[kv[0]]=kv[1]\n    rs\n  commentWrapper=(options)->\n    settings=\n      selector:''\n      getUrl:()->''\n    settings=$.extend settings, options\n    $(settings.selector).comments\n      noCommentsText: message_nocomment\n      profilePictureURL: 'https://app.viima.com/static/media/user_profiles/user-icon.png'\n      textareaPlaceholderText: message_leavecommenthere\n      fieldMappings:\n        id: 'comment_id'\n        created: 'created_at'\n        content: 'comment_content'\n        fullname: 'author_name'\n        profilePictureURL: 'author_avatar'\n        parent: 'parent_comment'\n      getComments: (success,error)->\n        $.ajax\n          type: 'get'\n          url: settings.getUrl()\n          success: (commentArray)->\n            console.log commentArray\n            success commentArray\n          error: error\n      postComment: (commentJson,success,error)->\n        $.ajax\n          type: 'POST'\n          url: settings.getUrl()\n          data: commentJson\n          success: (comment)->\n            success comment\n          error: error\n\n  $.Ulibi=\n    TagItem: TagItem\n    DestinationItem: DestinationItem\n    uploadImage: uploadImage\n    parseQueryString: parseQueryString\n  $.fn.extend\n    addClassIfExist: (cls)->\n      @each ()->\n        if not $(@).hasClass cls then $(@).addClass cls else $(@)\n        @\n    removeClassIfExist: (cls)->\n      @each ()->\n        if $(@).hasClass cls then $(@).removeClass cls else $(@)\n        @\n\n    UlibiTagEditor: (options)->\n      settings=\n        debug: false\n        wrapClass: ''\n        tags: []\n        itemManager: {}\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        $(@).width ($(@).parent().innerWidth()-24)\n        $(@).textext\n          'plugins': 'tags autocomplete'\n          'html':\n            wrap: \"<div class=\\\"text-core \"+settings.wrapClass+\"\\\"><div class=\\\"text-wrap\\\"></div></div>\"\n            tag: \"<div class=\\\"text-tag\\\"><div class=\\\"text-button\\\"><span class=\\\"text-label\\\"/><a class=\\\"custom-edit\\\"/><a class=\\\"text-remove\\\"><i class=\\\"fa fa-times\\\"></i></a></div></div>\"\n          ext:\n            itemManager: settings.itemManager\n        .bind 'getSuggestions',(e,data)=>\n          textext = $(e.target).textext()[0]\n          query = (if data then data.query else '') || ''\n          $(@).trigger 'setSuggestions',\n            result : textext.itemManager().filter settings.tags, query\n        log 'UlibiTagEditor worked!'\n    UlibiPhotoDragDrop: (options)->\n      settings=\n        debug: false\n        html:\n          isDraggingClass: 'is-dragging'\n          isDropped: 'is-dropped'\n        getToken:()->\n          $('input[name=\"_token\"]').val()\n        callback: ()->\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        alert 'Trình duyệt của bạn không hỗ trợ kéo & thả File :)' if typeof window.FileReader=='undefined'\n        @ondragover= -> false\n        @ondragend= -> false\n        @ondragenter= (e)->\n          # $(@).addClass settings.html.isDraggingClass if not $(@).hasClass settings.html.isDraggingClass\n          e.stopPropagation()\n          e.preventDefault()\n          $(@).addClassIfExist settings.html.isDraggingClass\n          false\n        @ondragleave= ->\n          # $(@).removeClass settings.html.isDraggingClass if $(@).hasClass settings.html.isDraggingClass\n          $(@).removeClassIfExist settings.html.isDraggingClass\n          false\n        @ondrop= (e)=>\n          e.stopPropagation()\n          e.preventDefault()\n          $(@).addClass settings.html.isDropped if not $(@).hasClass settings.html.isDropped\n          reader=new FileReader()\n          file=e.dataTransfer.files[0]\n          reader.onload=(event)=>\n            log '[UlibiPhotoDragDrop] file content length: '+event.target.result.length\n            $.Ulibi.uploadImage\n              uploadExisting:false\n              data:event.target.result\n              getToken: settings.getToken\n              callback: (data)=>\n                if data.status=='succeeded'\n                  $(@).addClass 'has-image' if not $(@).hasClass 'has-image'\n                  $(@).css 'background-image','url('+event.target.result+')'\n                  settings.callback data\n                return\n            return\n          reader.readAsDataURL file\n          false\n        log 'UlibiPhotoDragDrop worked!'\n        return\n    DeleteBlogArticle: (options)->\n      settings=\n        debug: false\n        csrf_token: ''\n        alert:\n          title:'Are you sure?'\n          text: \"Bạn có chắc chắn muốn xoá bài viết <strong>{title}</strong> không?\"\n        callback: ()->\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        $(@).click (e)->\n          action= $(e.target).attr 'data-href'\n          title=$(e.target).attr 'data-title'\n          swal\n            title: settings.alert.title\n            text: settings.alert.text.replace '{title}',title\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonColor: '#DD6B55',\n            confirmButtonText: 'Có, xoá nó đi :)',\n            cancelButtonText: 'Không :(',\n            closeOnConfirm: false,\n            closeOnCancel: true,\n            showLoaderOnConfirm: true,\n            html: true\n          , ()->\n              $.ajax\n                url: action\n                type: 'DELETE'\n                data:\n                  '_token': settings.csrf_token\n                success: ()->\n                  swal\n                    title: 'Success',\n                    text: '',\n                    type: 'success'\n                  ,settings.callback\n                error: ()->\n                  swal\n                    title: 'Failed',\n                    text: '',\n                    type: 'error'\n                  ,settings.callback\n              return\n          return\n        log 'DeleteBlogArticle plugin worked!'\n        return\n    UlibiImageSelector: (options)->\n      settings=\n        debug: false\n        html:\n          uploaderId:''\n          parentId:''\n          childrenSelector:''\n        ajax:\n          url:''\n          method:'POST'\n          dataTemplate:'key={0}'\n        callback: ()->\n          location.reload true\n        uploadCallback: null\n\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        btnDisabledClass=\"btn-disabled\"\n        popup=$(@).attr 'href'\n        submit=$(popup).find \"[data-role='change']\"\n        uploader=$(settings.html.uploaderId)\n        dataSelectedAttr=\"data-selected\"\n        ajax=JSON.parse(atob(settings.ajax))\n\n        changePhoto=(id)=>\n          data=ajax.dataTemplate.replace '{0}',id\n          log id\n          # log data\n          test=false\n          if !test\n            $.ajax\n              url:ajax.url\n              type:ajax.method\n              data:data\n              success:(response)->\n                if response.status==\"OK\"\n                  log \"Change photo success, id=\"+id\n                  settings.callback()\n                else\n                  log \"Error expected, message: \"+response.message\n                return\n          return\n\n        update = (e)=>\n          e.preventDefault()\n          if $(submit).hasClass btnDisabledClass\n            return\n          selected=$(submit).attr dataSelectedAttr\n          changePhoto selected\n          false\n\n        openSelector = ()=>\n          $(submit).addClassIfExist btnDisabledClass\n          $(popup).find(settings.html.parentId).selectable\n            filter: settings.html.childrenSelector\n            selected: (e,ui)->\n              $(submit).removeClassIfExist btnDisabledClass\n              .attr dataSelectedAttr,$(ui.selected).attr \"data-photoid\"\n              .on \"click\",update\n\n              return\n\n          cb=settings.uploadCallback\n          if(!cb)\n            cb=(data)->\n              changePhoto data.id\n              return\n\n          $(uploader).UlibiPhotoDragDrop\n            debug: true\n            getToken: ->\n              ($.Ulibi.parseQueryString ajax.dataTemplate)._token\n            callback: cb\n          return\n        closeSelector = ()=>\n          $(popup).find(settings.html.parentId).selectable \"destroy\"\n          $(submit).off()\n        $(@).magnificPopup\n          type:'inline'\n          preloader:false\n          mainClass:'mfp-dialog'\n          callbacks:\n            beforeOpen: ()->\n              openSelector()\n              return\n            close: ()->\n              closeSelector()\n              return\n\n\n        log 'UlibiImageSelector plugin worked!'\n        return\n    UlibiProfileInformationEditor: (options)->\n      settings=\n        debug: false\n        html:\n          dialogSelector:''\n          formSelector:''\n        ajax:\n          url:''\n          method:'POST'\n          dataTemplate:'key={0}'\n        callback: ()->\n          location.reload true\n\n      settings=$.extend settings, options\n\n\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ->\n        $(@).magnificPopup\n          type:'inline'\n          preloader:false\n          mainClass:'mfp-dialog'\n          callbacks:\n            open: ()=>\n              tab=$(@).attr 'data-tab'\n              $(settings.html.dialogSelector+' a[href=\"#tab-'+tab+'\"]')\n              .tab 'show'\n              return\n            close: ()=>\n              $(settings.html.dialogSelector+' a[href=\"#tab-0\"]')\n              .tab 'show'\n              return\n        log \"UlibiProfileInformationEditor worked!\"\n        return\n    UlibiShowImage: (options) ->\n      settings=\n        debug: false\n        html:\n          dialogSelector:''\n          formSelector:''\n\n      settings=$.extend settings, options\n\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n\n      @each ->\n        data=JSON.parse atob $(@).attr 'data-encoded'\n        author=JSON.parse atob $(@).attr 'data-author-encoded'\n        content=JSON.parse atob $(@).attr 'data-content-encoded'\n        isowner=false\n        isowner=true if window['authToken'] && atob(window['authToken'])==author['username']\n        log isowner\n\n        doLike=(e)->\n          $.ajax\n            type: 'POST'\n            url: '/ulibier/like'\n            data: \"content_id=#{content['content_id']}\"\n            success:(data)=>\n              log @\n              if data['action']=='like'\n                $(@).find('i').removeClassIfExist 'fa-heart-o'\n                .addClassIfExist 'fa-heart'\n              else\n                $(@).find('i').removeClassIfExist 'fa-heart'\n                .addClassIfExist 'fa-heart-o'\n              $(@).next().text data['like_count']\n              return\n\n        doDelete=()->\n          r=confirm 'Bạn có chắc chắn muốn xoá ảnh này không?'\n          if r\n            $.ajax\n              type: 'delete'\n              url: \"/photo/#{content['content_id']}\"\n              success: ()->\n                location.reload true\n              error: (response)->\n                log response\n          return\n\n        $(@).magnificPopup\n          type: 'image'\n          closeBtnInside: false\n          image:\n            verticalFit: false\n            markup: \"\"\"\n<div class=\"mfp-figure image-show\">\n  <div class='row'>\n    <div class='col-sm-8'>\n      <div class=\"mfp-img\"></div>\n      <div class='img-toolbar'>\n        #{ \"<div class='btn btn-default delete-image'>Xoá ảnh</div>\" if isowner }\n      </div>\n    </div>\n    <div class=\"col-sm-4 img-content\">\n      <div class='divide20'></div>\n      <h5 class=\"img-show-author\"><a href=\"/profile/#{author['username']}\">#{author['full_name']}</a></h5>\n      <p class=\"img-show-title\">#{data['photo_description']}</p>\n      <p class='img-show-counter'><a class='img-like' href='javascript:void(0)'><i class=\"fa #{ if content['liked'] then 'fa-heart' else 'fa-heart-o' }\"></i></a><span class='like-count'>#{content['like_count']}</span></p>\n      <div id='comment-container-photo'>\n      </div>\n    </div>\n  </div>\n</div>\n\"\"\"\n            titleSrc: (item)->\n              id=item.el.attr('title')\n          callbacks:\n            imageLoadComplete: (e)->\n              img=$(@.content).find('img.mfp-img')[0]\n              $(@.content).parent().width img.naturalWidth*3/2\n              selector=$(@.content).find('a.img-like')[0]\n              $(selector).unbind 'click'\n              $(selector).click doLike\n              deleteBtn=$(@.content).find('div.delete-image')[0]\n              if deleteBtn\n                $(deleteBtn).unbind 'click'\n                $(deleteBtn).click doDelete\n\n              comment=$(@.content).find('div#comment-container-photo')[0]\n              commentWrapper\n                selector: $(comment)\n                getUrl: ()->\"/photo/#{content['content_id']}/comment\"\n\n        log 'UlibiShowImage worked!'\n        return\n    UlibiArticleComment: () ->\n      @each ->\n        id=$(@).data 'id'\n        url = \"/blog/#{id}/comment\"\n        getUrl=()->url\n        commentWrapper\n          selector: @\n          getUrl: getUrl\n\n\n) jQuery, window",null],"sourceRoot":"/source/"}