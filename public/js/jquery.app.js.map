{"version":3,"sources":["jquery.coffee","jquery.app.js"],"names":["$","DestinationItem","TagItem","uploadImage","prototype","stringToItem","str","tag_id","tag_name","itemToString","item","compareItems","item1","item2","des_name","options","settings","token","uploadExisting","data","uploadUrl","getToken","val","callback","extend","ajax","type","done","Ulibi","fn","addClassIfExist","cls","this","each","hasClass","addClass","removeClassIfExist","removeClass","UlibiTagEditor","log","debug","wrapClass","tags","itemManager","msg","console","width","parent","innerWidth","textext","plugins","html","wrap","tag","ext","bind","_this","e","query","target","trigger","result","filter","UlibiPhotoDragDrop","isDraggingClass","isDropped","window","FileReader","alert","ondragover","ondragend","ondragenter","ondragleave","ondrop","file","reader","preventDefault","dataTransfer","files","onload","event","length","status","css","readAsDataURL","DeleteBlogArticle","csrf_token","title","text","click","action","attr","swal","replace","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","closeOnCancel","showLoaderOnConfirm","url","_token","success","error","UlibiImageSelector","parentId","childrenSelector","method","dataTemplate","location","reload","btnDisabledClass","closeSelector","dataSelectedAttr","openSelector","popup","submit","update","find","selected","test","response","message","selectable","ui","on","destroy","off","magnificPopup","preloader","mainClass","callbacks","beforeOpen","close","jQuery","call"],"mappings":"CAAA,YAAA,SAAEA,GACA,GAAAC,GAAAC,EAAAC,CCsEE,ODtEID,GAAA,WCGF,QAASA,MAiBT,MAfAA,GAAQE,UDJVC,aAAc,SAACC,GCKX,ODJFC,OAAQ,EACRC,SAAUF,ICSVJ,EAAQE,UDRVK,aAAc,SAACC,GCSX,MDTkBA,GAAK,UCYzBR,EAAQE,UDXVO,aAAc,SAACC,EAAOC,GCYlB,MDZ0BD,GAAM,SAAaC,EAAM,QCe9CX,KDdLD,EAAA,WCkBF,QAASA,MAgBT,MAdAA,GAAgBG,UDnBlBC,aAAc,SAACC,GCoBX,ODnBFQ,SAAUR,ICwBVL,EAAgBG,UDvBlBK,aAAc,SAACC,GCwBX,MDxBkBA,GAAK,UC2BzBT,EAAgBG,UD1BlBO,aAAc,SAACC,EAAOC,GC2BlB,MD3B0BD,GAAM,WAAeC,EAAM,UC8BhDZ,KD7BXE,EAAY,SAACY,GACX,GAAAC,GAAAC,CC4CE,OD5CFD,IACEE,eAAe,EACfC,KAAK,GACLC,UAAW,SACXC,SAAS,WCkCL,MDjCFrB,GAAE,wBAAwBsB,OAC5BC,SAAS,cACXP,EAAShB,EAAEwB,OAAOR,EAAUD,GAC5BE,EAAMD,EAASK,WACfrB,EAAEyB,KAAKT,EAASI,WACdM,KAAM,OACNP,MAAUH,EAASE,eAAoB,MAAW,iBAAiBF,EAASG,KAAK,WAAWF,IAC7FU,KAAK,SAACR,GCoC8B,kBAAtBH,GAASO,UDnCtBP,EAASO,SAAUJ,MAGvBnB,EAAE4B,OACA1B,QAASA,EACTD,gBAAiBA,EACjBE,YAAaA,GACfH,EAAE6B,GAAGL,QACHM,gBAAiB,SAACC,GCuCd,MDtCFC,MAACC,KAAK,WC4CF,MD3CKjC,GAAEgC,MAAGE,SAASH,GAAgC/B,EAAEgC,MAAzBhC,EAAEgC,MAAGG,SAASJ,GAC5CC,QACJI,mBAAoB,SAACL,GC6CjB,MD5CFC,MAACC,KAAK,WCkDF,MDjDCjC,GAAEgC,MAAGE,SAASH,GAAS/B,EAAEgC,MAAGK,YAAYN,GAAS/B,EAAEgC,MACtDA,QAEJM,eAAgB,SAACvB,GACf,GAAAwB,GAAAvB,CCgEE,ODhEFA,IACEwB,OAAO,EACPC,UAAW,GACXC,QACAC,gBACF3B,EAAShB,EAAEwB,OAAOR,EAAUD,GAC5BwB,EAAI,SAACK,GACiB5B,EAASwB,OCoDF,mBAAZK,UAAuC,OAAZA,SDpD1CA,QAASN,IAAIK,IAEfZ,KAACC,KAAK,WC4EF,MD3EFjC,GAAEgC,MAAGc,MAAO9C,EAAEgC,MAAGe,SAASC,aAAa,IACvChD,EAAEgC,MAAGiB,SACHC,QAAW,oBACXC,MACEC,KAAM,yBAA0BpC,EAASyB,UAAU,wCACnDY,IAAK,uKACPC,KACEX,YAAa3B,EAAS2B,eACzBY,KAAK,iBAAiB,SAAAC,GC0DnB,MD1DmB,UAACC,EAAEtC,GACxB,GAAAuC,GAAAT,CC6DI,OD7DJA,GAAUjD,EAAEyD,EAAEE,QAAQV,UAAU,GAChCS,GAAYvC,EAAUA,EAAKuC,MAAW,KAAO,GAC7C1D,EAAEwD,GAAGI,QAAQ,kBACXC,OAASZ,EAAQN,cAAcmB,OAAO9C,EAAS0B,KAAMgB,OAJlC1B,OAKvBO,EAAI,6BACRwB,mBAAoB,SAAChD,GACnB,GAAAwB,GAAAvB,CCiFE,ODjFFA,IACEwB,OAAO,EACPW,MACEa,gBAAiB,cACjBC,UAAW,cACb1C,SAAU,cACZP,EAAShB,EAAEwB,OAAOR,EAAUD,GAC5BwB,EAAI,SAACK,GACiB5B,EAASwB,OCoEF,mBAAZK,UAAuC,OAAZA,SDpE1CA,QAASN,IAAIK,IAEfZ,KAACC,KAAK,WACoF,mBAAnBiC,QAAOC,YAA5EC,MAAM,sDACNpC,KAACqC,WAAY,WC0ET,OD1EY,GAChBrC,KAACsC,UAAW,WC4ER,OD5EW,GACftC,KAACuC,YAAa,WC+EV,MD7EFvE,GAAEgC,MAAGF,gBAAgBd,EAASmC,KAAKa,kBACnC,GACFhC,KAACwC,YAAa,WC+EV,MD7EFxE,GAAEgC,MAAGI,mBAAmBpB,EAASmC,KAAKa,kBACtC,GACFhC,KAACyC,OAAQ,SAAAjB,GC8EL,MD9EK,UAACC,GACR,GAAAiB,GAAAC,CCsGI,ODtGJlB,GAAEmB,iBAC2C5E,EAAEwD,GAAGtB,SAASlB,EAASmC,KAAKc,YAAzEjE,EAAEwD,GAAGrB,SAASnB,EAASmC,KAAKc,WAC5BU,EAAW,GAAAR,YACXO,EAAKjB,EAAEoB,aAAaC,MAAM,GAC1BH,EAAOI,OAAO,SAACC,GACbzC,EAAI,6CAA6CyC,EAAMrB,OAAOE,OAAOoB,QACrEjF,EAAE4B,MAAMzB,aACNe,gBAAe,EACfC,KAAK6D,EAAMrB,OAAOE,OAClBtC,SAAU,SAACJ,GACO,cAAbA,EAAK+D,SAC2BlF,EAAEwD,GAAGtB,SAAS,cAA/ClC,EAAEwD,GAAGrB,SAAS,aACdnC,EAAEwD,GAAG2B,IAAI,mBAAmB,OAAOH,EAAMrB,OAAOE,OAAO,KACvD7C,EAASO,SAASJ,QAG1BwD,EAAOS,cAAcV,IACrB,IAlBO1C,MAmBTO,EAAI,iCAER8C,kBAAmB,SAACtE,GAClB,GAAAwB,GAAAvB,CC0GE,OD1GFA,IACEwB,OAAO,EACP8C,WAAY,GACZlB,OACEmB,MAAM,gBACNC,KAAM,sEACRjE,SAAU,cACZP,EAAShB,EAAEwB,OAAOR,EAAUD,GAC5BwB,EAAI,SAACK,GACiB5B,EAASwB,OC4FF,mBAAZK,UAAuC,OAAZA,SD5F1CA,QAASN,IAAIK,IAEfZ,KAACC,KAAK,WACJjC,EAAEgC,MAAGyD,MAAM,SAAChC,GACV,GAAAiC,GAAAH,CAAAG,GAAQ1F,EAAEyD,EAAEE,QAAQgC,KAAK,aACzBJ,EAAMvF,EAAEyD,EAAEE,QAAQgC,KAAK,cACvBC,MACEL,MAAOvE,EAASoD,MAAMmB,MACtBC,KAAMxE,EAASoD,MAAMoB,KAAKK,QAAQ,UAAUN,GAC5C7D,KAAM,UACNoE,kBAAkB,EAClBC,mBAAoB,UACpBC,kBAAmB,mBACnBC,iBAAkB,WAClBC,gBAAgB,EAChBC,eAAe,EACfC,qBAAqB,EACrBjD,MAAM,GACN,WACEnD,EAAEyB,MACA4E,IAAKX,EACLhE,KAAM,SACNP,MACEmF,OAAUtF,EAASsE,YACrBiB,QAAS,WCkGP,MDjGAX,OACEL,MAAO,UACPC,KAAM,GACN9D,KAAM,WACPV,EAASO,WACZiF,MAAO,WCmGL,MDlGAZ,OACEL,MAAO,SACPC,KAAM,GACN9D,KAAM,SACPV,EAASO,iBAGpBgB,EAAI,uCAERkE,mBAAoB,SAAC1F,GACnB,GAAAwB,GAAAvB,CC6HE,OD7HFA,IACEwB,OAAO,EACPW,MACEuD,SAAS,GACTC,iBAAiB,IACnBlF,MACE4E,IAAI,GACJO,OAAO,OACPC,aAAa,WACftF,SAAU,WCyGN,MDxGFuF,UAASC,QAAO,KAEpB/F,EAAShB,EAAEwB,OAAOR,EAAUD,GAC5BwB,EAAI,SAACK,GACiB5B,EAASwB,OC0GF,mBAAZK,UAAuC,OAAZA,SD1G1CA,QAASN,IAAIK,IAEfZ,KAACC,KAAK,WACJ,GAAA+E,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CAAAN,GAAiB,eACjBI,EAAMpH,EAAEgC,MAAG2D,KAAK,QAChB0B,EAAOrH,EAAEoH,GAAOG,KAAK,wBACrBL,EAAiB,gBAEjBI,EAAS,SAAA9D,GC8GL,MD9GK,UAACC,GACR,GAAAtC,GAAAqG,EAAAC,CACA,OADAhE,GAAEmB,iBACC5E,EAAEqH,GAAQnF,SAAS8E,GAAtB,QAEAQ,EAASxH,EAAEqH,GAAQ1B,KAAKuB,GACxB/F,EAAKH,EAASS,KAAKoF,aAAahB,QAAQ,MAAM2B,GAC9CjF,EAAIiF,GACJjF,EAAIpB,GACJsG,GAAK,EACDA,GACFzH,EAAEyB,MACA4E,IAAIrF,EAASS,KAAK4E,IAClB3E,KAAKV,EAASS,KAAKmF,OACnBzF,KAAKA,EACLoF,QAAQ,SAACmB,GACa,OAAjBA,EAASxC,QACV3C,EAAI,4BAA4BiF,GAChCxG,EAASO,YAETgB,EAAI,4BAA4BmF,EAASC,aAEjD,KArBO3F,MAsBTmF,EAAe,SAAA3D,GCsHX,MDtHW,YACbxD,EAAEqH,GAAQvF,gBAAgBkF,GAC1BhH,EAAEoH,GAAOG,KAAKvG,EAASmC,KAAKuD,UAAUkB,YACpC9D,OAAQ9C,EAASmC,KAAKwD,iBACtBa,SAAU,SAAC/D,EAAEoE,GACX7H,EAAEqH,GAAQjF,mBAAmB4E,GAC5BrB,KAAKuB,EAAiBlH,EAAE6H,EAAGL,UAAU7B,KAAK,iBAC1CmC,GAAG,QAAQR,QAPHtF,MAWfiF,EAAgB,SAAAzD,GCsHZ,MDtHY,YCwHV,MDvHJxD,GAAEoH,GAAOG,KAAKvG,EAASmC,KAAKuD,UAAUqB,UACtC/H,EAAEqH,GAAQW,QAFIhG,MAGhBhC,EAAEgC,MAAGiG,eACHvG,KAAK,SACLwG,WAAU,EACVC,UAAU,aACVC,WACEC,WAAY,WACVlB,KAEFmB,MAAO,WACLrB,QAEN1E,EAAI,qCACJA,EAAI,kBAAkB8E,SAE5BkB,UC8HCC,KAAKxG","file":"jquery.app.js","sourcesContent":["(($) ->\n  class TagItem\n    stringToItem: (str)->\n      tag_id: 0\n      tag_name: str\n    itemToString: (item)->item['tag_name']\n    compareItems: (item1, item2)->item1['tag_id'] == item2['tag_id']\n  class DestinationItem\n    stringToItem: (str)->\n      des_name: str\n    itemToString: (item)->item['des_name']\n    compareItems: (item1, item2)->item1['des_name'] == item2['des_name']\n  uploadImage=(options)->\n    settings=\n      uploadExisting:0\n      data:''\n      uploadUrl: '/photo'\n      getToken:()->\n        $('input[name=\"_token\"]').val()\n      callback:()->\n    settings=$.extend settings, options\n    token=settings.getToken()\n    $.ajax settings.uploadUrl,\n      type: 'POST'\n      data: (if settings.uploadExisting then 'id=' else 'internal_url=')+settings.data+'&_token='+token\n    .done (data)->\n      settings.callback? data\n      return\n\n  $.Ulibi=\n    TagItem: TagItem\n    DestinationItem: DestinationItem\n    uploadImage: uploadImage\n  $.fn.extend\n    addClassIfExist: (cls)->\n      @each ()->\n        if not $(@).hasClass cls then $(@).addClass cls else $(@)\n        @\n    removeClassIfExist: (cls)->\n      @each ()->\n        if $(@).hasClass cls then $(@).removeClass cls else $(@)\n        @\n\n    UlibiTagEditor: (options)->\n      settings=\n        debug: false\n        wrapClass: ''\n        tags: []\n        itemManager: {}\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        $(@).width ($(@).parent().innerWidth()-24)\n        $(@).textext\n          'plugins': 'tags autocomplete'\n          'html':\n            wrap: \"<div class=\\\"text-core \"+settings.wrapClass+\"\\\"><div class=\\\"text-wrap\\\"></div></div>\"\n            tag: \"<div class=\\\"text-tag\\\"><div class=\\\"text-button\\\"><span class=\\\"text-label\\\"/><a class=\\\"custom-edit\\\"/><a class=\\\"text-remove\\\"><i class=\\\"fa fa-times\\\"></i></a></div></div>\"\n          ext:\n            itemManager: settings.itemManager\n        .bind 'getSuggestions',(e,data)=>\n          textext = $(e.target).textext()[0]\n          query = (if data then data.query else '') || ''\n          $(@).trigger 'setSuggestions',\n            result : textext.itemManager().filter settings.tags, query\n        log 'UlibiTagEditor worked!'\n    UlibiPhotoDragDrop: (options)->\n      settings=\n        debug: false\n        html:\n          isDraggingClass: 'is-dragging'\n          isDropped: 'is-dropped'\n        callback: ()->\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        alert 'Trình duyệt của bạn không hỗ trợ kéo & thả File :)' if typeof window.FileReader=='undefined'\n        @ondragover= -> false\n        @ondragend= -> false\n        @ondragenter= ->\n          # $(@).addClass settings.html.isDraggingClass if not $(@).hasClass settings.html.isDraggingClass\n          $(@).addClassIfExist settings.html.isDraggingClass\n          false\n        @ondragleave= ->\n          # $(@).removeClass settings.html.isDraggingClass if $(@).hasClass settings.html.isDraggingClass\n          $(@).removeClassIfExist settings.html.isDraggingClass\n          false\n        @ondrop= (e)=>\n          e.preventDefault()\n          $(@).addClass settings.html.isDropped if not $(@).hasClass settings.html.isDropped\n          reader=new FileReader()\n          file=e.dataTransfer.files[0]\n          reader.onload=(event)=>\n            log '[UlibiPhotoDragDrop] file content length: '+event.target.result.length\n            $.Ulibi.uploadImage\n              uploadExisting:false\n              data:event.target.result\n              callback: (data)=>\n                if data.status=='succeeded'\n                  $(@).addClass 'has-image' if not $(@).hasClass 'has-image'\n                  $(@).css 'background-image','url('+event.target.result+')'\n                  settings.callback data\n                return\n            return\n          reader.readAsDataURL file\n          false\n        log 'UlibiPhotoDragDrop worked!'\n        return\n    DeleteBlogArticle: (options)->\n      settings=\n        debug: false\n        csrf_token: ''\n        alert:\n          title:'Are you sure?'\n          text: \"Bạn có chắc chắn muốn xoá bài viết <strong>{title}</strong> không?\"\n        callback: ()->\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        $(@).click (e)->\n          action= $(e.target).attr 'data-href'\n          title=$(e.target).attr 'data-title'\n          swal\n            title: settings.alert.title\n            text: settings.alert.text.replace '{title}',title\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonColor: '#DD6B55',\n            confirmButtonText: 'Có, xoá nó đi :)',\n            cancelButtonText: 'Không :(',\n            closeOnConfirm: false,\n            closeOnCancel: true,\n            showLoaderOnConfirm: true,\n            html: true\n          , ()->\n              $.ajax\n                url: action\n                type: 'DELETE'\n                data:\n                  '_token': settings.csrf_token\n                success: ()->\n                  swal\n                    title: 'Success',\n                    text: '',\n                    type: 'success'\n                  ,settings.callback\n                error: ()->\n                  swal\n                    title: 'Failed',\n                    text: '',\n                    type: 'error'\n                  ,settings.callback\n              return\n          return\n        log 'DeleteBlogArticle plugin worked!'\n        return\n    UlibiImageSelector: (options)->\n      settings=\n        debug: false\n        html:\n          parentId:''\n          childrenSelector:''\n        ajax:\n          url:''\n          method:'POST'\n          dataTemplate:'key={0}'\n        callback: ()->\n          location.reload true\n\n      settings=$.extend settings, options\n      log=(msg)->\n        console?.log msg if settings.debug\n        return\n      @each ()->\n        btnDisabledClass=\"btn-disabled\"\n        popup=$(@).attr 'href'\n        submit=$(popup).find \"[data-role='change']\"\n        dataSelectedAttr=\"data-selected\"\n\n        update = (e)=>\n          e.preventDefault()\n          if $(submit).hasClass btnDisabledClass\n            return\n          selected=$(submit).attr dataSelectedAttr\n          data=settings.ajax.dataTemplate.replace '{0}',selected\n          log selected\n          log data\n          test=false\n          if !test\n            $.ajax\n              url:settings.ajax.url\n              type:settings.ajax.method\n              data:data\n              success:(response)->\n                if response.status==\"OK\"\n                  log \"Change photo success, id=\"+selected\n                  settings.callback()\n                else\n                  log \"Error expected, message: \"+response.message\n                return\n          false\n        openSelector = ()=>\n          $(submit).addClassIfExist btnDisabledClass\n          $(popup).find(settings.html.parentId).selectable\n            filter: settings.html.childrenSelector\n            selected: (e,ui)->\n              $(submit).removeClassIfExist btnDisabledClass\n              .attr dataSelectedAttr,$(ui.selected).attr \"data-photoid\"\n              .on \"click\",update\n\n              return\n          return\n        closeSelector = ()=>\n          $(popup).find(settings.html.parentId).destroy()\n          $(submit).off()\n        $(@).magnificPopup\n          type:'inline'\n          preloader:false\n          mainClass:'mfp-dialog'\n          callbacks:\n            beforeOpen: ()->\n              openSelector()\n              return\n            close: ()->\n              closeSelector()\n              return\n        log 'UlibiImageSelector plugin worked!'\n        log \"Submit Button: \"+submit\n        return\n) jQuery",null],"sourceRoot":"/source/"}